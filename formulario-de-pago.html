<!DOCTYPE html>
<html lang="es">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Incluir el script de Izipay -->
    <script src="https://static.micuentaweb.pe/static/js/krypton-client/V4.0/stable/kr-payment-form.min.js"></script>

    <link rel="stylesheet" href="https://static.micuentaweb.pe/static/js/krypton-client/V4.0/ext/neon-reset.min.css">
    <script type="text/javascript" src="https://static.micuentaweb.pe/static/js/krypton-client/V4.0/ext/neon.js"></script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
        }
        .kr-embedded {
            height: 100%;
            width: 100%;
        }
    </style>

    <script>
        // Configuración del formulario con soporte para cuotas y pagos diferidos
        const iziConfig = {
            config: {
                appearance: {
                    customize: {
                        elements: [
                            {
                                paymentMethod: 'CARD',
                                fields: [
                                    {
                                        name: 'firstName',
                                        order: 1
                                    },
                                    {
                                        name: 'lastName',
                                        order: 1
                                    },
                                    {
                                        name: 'cardNumber',
                                        order: 2
                                    },
                                    {
                                        name: 'expirationDate',
                                        order: 3
                                    },
                                    {
                                        name: 'securityCode',
                                        order: 3
                                    },
                                    {
                                        name: 'email',
                                        order: 4
                                    },
                                    {
                                        name: 'installments', // Campo para cuotas
                                        order: 5
                                    },
                                    {
                                        name: 'deferredPayment', // Campo para pago diferido
                                        order: 6
                                    }
                                ]
                            }
                        ]
                    }
                },
                render: {
                    typeForm: 'pop-up' // Cambia a 'embedded' si prefieres que esté incrustado
                }
            }
        };

        // Inicializar Izipay y cargar el formulario
        document.addEventListener('DOMContentLoaded', function () {
            const checkout = new Izipay({ config: iziConfig });

            checkout &&
                checkout.LoadForm({
                    authorization: '22083729:testpassword_LQhG5FVzdq9slMrMXtzMIhfxYiLcA3A54D6thPkE5U4U3', // Tu token de sesión
                    keyRSA: '22083729:testpublickey_KzkMgtLWFLrBUuR7p2O3dZiMRvjQG41bFeqLRYa24ShTC' // Tu clave RSA
                });
        });
    </script>
</head>

<body>
    <!-- Div donde se cargará el formulario pop-up o incrustado -->
    <div class="kr-embedded"></div>
</body>
</html>
